import{S as He}from"./SectionRenderer-D49FafAW.js";import{S as $e,a as Ve,b as ze,c as Ue,d as qe,e as Ge,f as Xe,T as Ze,M as Je,g as Qe,h as Ye,i as xe,j as _e,k as et,N as tt,s as k,l as b,m as Pe}from"./index-DzBiAgKs.js";import{l as st,a as it,m as nt,S as ot,M as at,A as lt,s as rt,j as Re,H as Ne,_ as dt}from"./ast-CAxai2wM.js";import{_ as E,e as O,o as d,c as m,a as o,r as y,b as v,w as N,n as p,d as f,f as B,t as g,F as ut,g as mt,h as M,l as pt,i as W,j as Ee,k as I,v as j,u as ht}from"./index-BMLKoJka.js";import"./compiler-UtTtaCZe.js";import"./ModalProfileSubscriptionPricing-DmelTdKp.js";const ft={inject:["fs","account","services"],data:()=>({content:"",mockup:null}),async mounted(){await this.getMockup(),this.load()},methods:{async getMockup(){var e,t,s;this.mockup=(t=(e=await this.services.manager.service("application_mockups").find({query:{application_id:this.account.project.data.id}}))==null?void 0:e.data)==null?void 0:t[0],this.account.project.mockup=((s=this.mockup)==null?void 0:s.code)||""},async save(){var e;this.mockup?this.mockup=await this.services.manager.service("application_mockups").patch(this.mockup.id,{code:this.content}):this.mockup=await this.services.manager.service("application_mockups").create({code:this.content}),this.account.project.mockup=((e=this.mockup)==null?void 0:e.code)||"",this.account.save(),alert("Mockup saved!"),this.$emit("changed")},async load(){const e=async t=>{var u;let l=((u=this.mockup)==null?void 0:u.code)||"export default (app) => {}";this.content=l;let r=O.getModel(this.account.project.data.id+".js");r?r.setValue(this.content):r=O.createModel(this.content,"typescript",this.account.project.data.id+".js");const n=O.create(this.$refs.editor,{theme:t,model:r,selectOnLineNumbers:!0,automaticLayout:!0,autoIndent:!0,wordWrapOverride1:"off","semanticHighlighting.enabled":!0}),a=n._themeService._theme;a.getTokenStyleMetadata=(h,c,C)=>{const T=c.includes("readonly");switch(h){case"function":case"method":return{foreground:12};case"class":return{foreground:11};case"variable":case"property":return{foreground:T?21:9};default:return{foreground:0}}},it(nt,n),n.onDidChangeModelContent(()=>{this.content=n.getValue()})};st(O).then(t=>e(t.light))}}},yt={ref:"editor",class:"monaco-editor"};function vt(e,t,s,l,r,n){return d(),m("div",null,[o("button",{onClick:t[0]||(t[0]=(...a)=>n.save&&n.save(...a))},"Save"),o("div",yt,null,512)])}const gt=E(ft,[["render",vt],["__scopeId","data-v-27630429"]]),ct={props:["open","mobile"],inject:["account"],components:{ModalMockupContent:gt},data:()=>({mounted:!1,closing:!1}),async created(){this.fadeIn()},watch:{open(e){e&&this.fadeIn()}},computed:{premium(){var e,t,s;return(s=(t=(e=this.account)==null?void 0:e.subscriptions)==null?void 0:t.data)==null?void 0:s.length},admin(){var e;return(e=this.account.globalRoles)==null?void 0:e.includes("admin")}},methods:{emit(e){this.$emit("selection",e)},close(){this.closing=!0,setTimeout(()=>{this.closing=!1,this.$emit("close")},200)},fadeIn(){this.mounted=!1,setTimeout(()=>{this.mounted=!0})}}},wt={class:"container authorized"},kt={class:"header"},bt={class:"content"};function Ct(e,t,s,l,r,n){const a=y("ModalMockupContent");return s.open?(d(),m("div",{key:0,class:p(["modal",{mounted:e.mounted,closing:e.closing}])},[o("div",{class:"wrapper",onClick:t[2]||(t[2]=N(()=>{},["stop","prevent"]))},[o("div",wt,[o("div",kt,[t[4]||(t[4]=o("h2",null,"Mockup",-1)),o("button",{class:"button close",onClick:t[0]||(t[0]=(...u)=>n.close&&n.close(...u))})]),o("div",bt,[v(a,{onChanged:t[1]||(t[1]=u=>e.$emit("changed"))})])])]),o("div",{onClick:t[3]||(t[3]=(...u)=>n.close&&n.close(...u)),class:"outside"})],2)):f("",!0)}const St=E(ct,[["render",Ct],["__scopeId","data-v-b007371c"]]),Mt={props:["node","body","level","parent"],name:"router",computed:{subRouterView(){var e;return((e=this.children)==null?void 0:e.length)&&this.componentPath&&this.routePath},lvl(){return!this.level&&this.level!==0?0:this.level+1},routePath(){var e,t,s;if(((e=this.node)==null?void 0:e.type)==="ArrayExpression")return"";if(((t=this.node)==null?void 0:t.type)==="ObjectExpression"){const l=this.node.properties.find(r=>{var n;return r.type!=="ObjectProperty"?!1:((n=r==null?void 0:r.key)==null?void 0:n.name)==="path"});return(s=l==null?void 0:l.value)==null?void 0:s.value}return""},routeRedirect(){var e,t,s;if(((e=this.node)==null?void 0:e.type)==="ArrayExpression")return"";if(((t=this.node)==null?void 0:t.type)==="ObjectExpression"){const l=this.node.properties.find(r=>{var n;return r.type!=="ObjectProperty"?!1:((n=r==null?void 0:r.key)==null?void 0:n.name)==="redirect"});return(s=l==null?void 0:l.value)==null?void 0:s.value}return""},component(){var e,t;if(((e=this.node)==null?void 0:e.type)==="ArrayExpression")return"";if(((t=this.node)==null?void 0:t.type)==="ObjectExpression"){const s=this.node.properties.find(l=>{var r;return l.type!=="ObjectProperty"?!1:((r=l==null?void 0:l.key)==null?void 0:r.name)==="component"});return s==null?void 0:s.value}return""},componentPath(){var e,t,s,l,r,n,a,u,h,c,C,T,K,D,F,A;if(((e=this.component)==null?void 0:e.type)==="Identifier"){for(const S of this.body)if(!(S.type!=="ImportDeclaration"||!S.specifiers.find(w=>{var L;return!((w==null?void 0:w.type)!=="ImportDefaultSpecifier"||((L=w==null?void 0:w.local)==null?void 0:L.name)!==this.component.name)})))return(t=S==null?void 0:S.source)==null?void 0:t.value}else if(((s=this.component)==null?void 0:s.type)==="ArrowFunctionExpression"&&((r=(l=this.component)==null?void 0:l.body)==null?void 0:r.type)==="CallExpression"&&((u=(a=(n=this.component)==null?void 0:n.body)==null?void 0:a.callee)==null?void 0:u.type)==="Import"&&((T=(C=(c=(h=this.component)==null?void 0:h.body)==null?void 0:c.arguments)==null?void 0:C[0])==null?void 0:T.type)==="StringLiteral")return(A=(F=(D=(K=this.component)==null?void 0:K.body)==null?void 0:D.arguments)==null?void 0:F[0])==null?void 0:A.value;return""},children(){var e,t,s;if(((e=this.node)==null?void 0:e.type)==="ArrayExpression")return this.node.elements||[];if(((t=this.node)==null?void 0:t.type)==="ObjectExpression"){const l=this.node.properties.find(r=>{var n;return r.type!=="ObjectProperty"?!1:((n=r==null?void 0:r.key)==null?void 0:n.name)==="children"});return((s=l==null?void 0:l.value)==null?void 0:s.elements)||[]}return[]},start(e){},stop(e){}}},Tt={key:0};function It(e,t,s,l,r,n){var u;const a=y("router");return d(),m("div",null,[((u=s.node)==null?void 0:u.type)==="ObjectExpression"?(d(),m("div",{key:0,onPointerdown:t[0]||(t[0]=(...h)=>n.start&&n.start(...h)),onPointerup:t[1]||(t[1]=(...h)=>n.stop&&n.stop(...h)),style:B({marginLeft:s.level*40+"px"}),class:p([{"sub-router-view":n.subRouterView},"route-wrapper"])},[o("div",null,g(s.parent+n.routePath),1),o("div",null,g(n.componentPath),1),n.routeRedirect?(d(),m("div",Tt,"Redirect: "+g(n.routeRedirect),1)):f("",!0)],38)):f("",!0),(d(!0),m(ut,null,mt(n.children,h=>(d(),M(a,{node:h,body:s.body,level:n.lvl,parent:n.routePath+(n.lvl>0?"/":"")},null,8,["node","body","level","parent"]))),256))])}const jt=E(Mt,[["render",It],["__scopeId","data-v-eb3a5675"]]),Pt={props:["open","mobile","mappings"],inject:["packer","fs"],components:{Route:jt},data:()=>({mounted:!1,closing:!1,ast:null,routerNode:null}),async created(){this.fadeIn()},watch:{open(e){e&&this.fadeIn()}},computed:{body(){var e,t;return((t=(e=this.ast)==null?void 0:e.program)==null?void 0:t.body)||[]}},methods:{search(e=null,t=null,s=this.body){var l,r,n;t||(this.routerNode=null),Array.isArray(s)||(s=[s]);for(const a of s)a.type==="BlockStatement"?this.search(t,a,[...a.body,...a.directives]):a.type==="VariableDeclaration"?this.search(t,a,(a==null?void 0:a.declarations)||[]):a.type==="VariableDeclarator"?this.search(t,a,(a==null?void 0:a.init)||[]):a.type==="ObjectMethod"?this.search(t,a,(a==null?void 0:a.body)||[]):a.type==="ArrayExpression"?this.search(t,a,(a==null?void 0:a.elements)||[]):a.type==="ObjectExpression"?this.search(t,a,(a==null?void 0:a.properties)||[]):a.type==="ObjectProperty"?((l=a.key)==null||l.name,((r=a.key)==null?void 0:r.name)==="path"&&(this.routerNode||(this.routerNode=e,console.log("router",this.routerNode))),(n=a.key)==null||n.name,this.search(t,a,(a==null?void 0:a.value)||[])):a.type==="ExportDefaultDeclaration"?this.search(t,a,(a==null?void 0:a.declaration)||[]):a.type==="CallExpression"?(a.callee.name,this.search(t,a,(a==null?void 0:a.arguments)||[])):a.type==="ImportDeclaration"&&this.search(t,a,(a==null?void 0:a.specifiers)||[])},emit(e){this.$emit("selection",e)},close(){this.closing=!0,setTimeout(()=>{this.closing=!1,this.$emit("close")},200)},async fadeIn(){this.mounted=!1,await this.parse(),setTimeout(()=>{this.mounted=!0})},async parse(){try{const t=(await this.packer.list("/src")).find(s=>["router.js","router.ts","router.mjs","router/index.js","router/index.ts","router/index.mjs"].some(l=>s.endsWith(l)));if(this.ast=null,t){let s=await this.fs.readFile("/"+t,{encoding:"utf8"});this.ast=pt.parse(s,{sourceType:"module"}),this.search()}}catch(e){console.log("error parsing routes",e)}}}},Rt={class:"container authorized"},Nt={class:"header"},Et={class:"content"};function Kt(e,t,s,l,r,n){const a=y("Route");return s.open?(d(),m("div",{key:0,class:p(["modal",{mounted:e.mounted,closing:e.closing}])},[o("div",{class:"wrapper",onClick:t[1]||(t[1]=N(()=>{},["stop","prevent"]))},[o("div",Rt,[o("div",Nt,[t[3]||(t[3]=o("h2",null,"Routes",-1)),o("button",{class:"button close",onClick:t[0]||(t[0]=(...u)=>n.close&&n.close(...u))})]),o("div",Et,[v(a,{node:e.routerNode,body:n.body},null,8,["node","body"])])])]),o("div",{onClick:t[2]||(t[2]=(...u)=>n.close&&n.close(...u)),class:"outside"})],2)):f("",!0)}const Dt=E(Pt,[["render",Kt],["__scopeId","data-v-06ecf448"]]),Ft="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20xml:space='preserve'%3e%3cpath%20d='m25.2%2020.9-.7-.7%203.5-3.5-4.2-4.2-.7.7c-1.2%201.2-3.1%201.2-4.2%200-1.2-1.2-1.2-3.1%200-4.2l.7-.7L15.3%204l-3.5%203.5-.7-.7C9.9%205.6%208%205.6%206.8%206.8s-1.2%203.1%200%204.2l.7.7L4%2015.3l4.2%204.2.7-.7c1.2-1.2%203.1-1.2%204.2%200%201.2%201.2%201.2%203.1%200%204.2l-.7.7%204.2%204.2%203.5-3.5.7.7c1.2%201.2%203.1%201.2%204.2%200%201.4-1.1%201.4-3%20.2-4.2'%20style='fill:none;stroke:%23000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10'/%3e%3c/svg%3e",At="data:image/svg+xml,%3csvg%20width='800'%20height='800'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23fff'%20fill-opacity='.01'%20d='M0%200h48v48H0z'/%3e%3crect%20x='4'%20y='4'%20width='40'%20height='40'%20rx='3'%20stroke='%23000'%20stroke-width='4'%20stroke-linejoin='round'/%3e%3cpath%20d='M4%2017.333h40M17.333%2044V17.333'%20stroke='%23000'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Lt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%20xml:space='preserve'%3e%3cpath%20d='M397.496%200C334.264%200%20283%2051.528%20282.992%20115.096c0%2046.328%2027.296%2086.16%2066.552%20104.408%208.392%2028.984%2022.56%2061.296%2032.008%2081.496v103.104h-220.88c.608-1.976%201.232-3.952%201.792-5.904C201.712%20379.944%20229%20340.12%20229%20293.792c0-63.568-51.264-115.096-114.504-115.096C51.264%20178.696%200%20230.224%200%20293.792c0%2046.328%2027.296%2086.16%2066.552%20104.408%2012.408%2042.904%2037.528%2093.208%2041.192%20100.504L114.496%20512l6.72-13.288c2.624-5.152%2016.064-32.064%2028.088-62.6H413.56V300.768c9.464-20.208%2023.552-52.384%2031.904-81.264C484.712%20201.248%20512%20161.424%20512%20115.096%20512%2051.528%20460.736%200%20397.496%200M114.504%20332.032c-21.016%200-38.048-17.12-38.048-38.248s17.032-38.248%2038.048-38.248%2038.048%2017.12%2038.048%2038.248-17.032%2038.248-38.048%2038.248m283-178.688c-21.016%200-38.048-17.128-38.048-38.248%200-21.128%2017.032-38.248%2038.048-38.248s38.048%2017.128%2038.048%2038.248-17.04%2038.248-38.048%2038.248'/%3e%3c/svg%3e",H={props:["doc"],inject:["services","fs","account","packer","compiler","broadcaster","pkg","gitserver"],provide(){return{darkmode:W(()=>this.darkmode),group:W(()=>this.group),breakpoint:W(()=>this.breakpoint==="xl2"?"2xl":this.breakpoint==="mi"?"xs":this.breakpoint),theme:W(()=>this.darkmode?"dark":"light")}},components:{SectionRenderer:He,SectionTree:$e,SectionStyles:Ve,SectionVue:ze,SectionFiles:ot,SectionRoutes:Ue,SectionDeploy:qe,SectionTimeline:Ge,SectionBreadcrumb:Xe,Transform:Ze,ModalEditor:at,ModalMockup:St,ModalMenu:Je,ModalProfile:Qe,ModalElements:Ye,ModalStylesheets:xe,ModalRules:_e,ModalKeyframes:et,ModalRoutes:Dt,Navigator:tt},data:()=>({updateRoutes:!1,addCreate:!1,refreshContent:0,refreshContentBackwards:0,group:null,breakpoint:null,darkmode:!1,componentRouteMappings:[],lockBroadcast:!1,editorWindow:null,editorWindows:[],route:"/",modified:!1,timeline:!1,keyframesName:"",keyframesTimeline:null,previewWindows:[],code:null,before:null,after:null,inside:null,storingonline:!1,moving:null,insert:null,mockup:!1,mainMenu:!1,profile:!1,routerOverlay:localStorage.getItem("routerOverlay")!==null?localStorage.getItem("routerOverlay")==="true":!1,showTransform:!0,showPosition:!1,alwaysMount:!1,helper:!0,events:!1,renderKey:0,fsItem:null,fsItemTitle:"",mobile:!1,navigator:!0,menu:!0,width:0,layers:"files",layerStyle:null,layerRule:null,layerKeyframe:null,stylesheets:!1,rules:!1,keyframes:!1,storing:!1,selected:null,selectedParent:null,selectedType:null,ast:new lt,tempId:null,server:rt,widthNavmenu:localStorage.getItem("widthNavmenu")||250,widthSidemenu:localStorage.getItem("widthSidemenu")||250,dragNavigator:!1,dragSidemenu:!1,landscape:!1,undoCount:0,redoCount:0,historyLock:!1,syncing:!1,loadingSync:!1}),computed:{admin(){var e;return console.log("acc",this.account),(e=this.account.globalRoles)==null?void 0:e.includes("admin")},premium(){var e,t,s;return(s=(t=(e=this.account)==null?void 0:e.subscriptions)==null?void 0:t.data)==null?void 0:s.length},emptyProject(){var e;return!this.fsItem||!((e=this.account.project.data)!=null&&e.id)},bottomTabsHeight(){return"42px"},navmenu(){return this.navigator?this.mobile?"100%":this.widthNavmenu+"px":"0px"},sidemenu(){return this.menu?this.mobile?"100%":this.widthSidemenu+"px":"0px"},activeMenu(){return this.navmenu!=="0px"||this.sidemenu!=="0px"},breadcrumbBottom(){return this.timeline?"142px":"42px"},editorsTopMobile(){const e=this.timeline?this.activeMenu?"calc(30% - 50px)":"50px":this.activeMenu?"calc(30% + 50px)":"50px";return this.landscape?"50px":e},transformToolsHeight(){return this.timeline?"calc(100% - 92px - 100px - 42px - 40px)":"calc(100% - 92px - 42px - 40px)"},transformToolsHeightMobile(){return this.timeline?this.activeMenu?"calc(30% - 100px - 42px - 40px)":"calc(100vh - 92px - 100px - 42px - 40px)":this.activeMenu?"calc(30% - 42px - 40px)":"calc(100vh - 92px - 42px - 40px)"},mobileMenuHeight(){return this.landscape?"100%":"70%"}},watch:{ast:{handler(){this.sendToWindow(this.editorWindow)},deep:!0},routerOverlay(){localStorage.setItem("routerOverlay",this.routerOverlay)},async"account.project.data.id"(){var e,t;this.route="/",this.undoCount=0,this.redoCount=0,await k("undoHistory",{}),await k("redoHistory",{}),this.modified=await this.packer.gitModified(),this.fsItem=null,((t=(e=this.account.project)==null?void 0:e.data)==null?void 0:t.type)==="vue-sfc"?this.layers="component":this.layers="files",this.account.filepath&&await this.resetFSItem()},"account.main"(e){this.ast.parse(e)},async"account.user.id"(e){this.account.filepath&&await this.resetFSItem()},async"account.filepath"(e){var t;e!==((t=this.fsItem)==null?void 0:t.path)&&await this.resetFSItem()},async fsItem(e,t){var r,n,a,u;if(e!=null&&e.path.endsWith(".vue")){this.selected=null,this.selectedType=null,this.getNavTitle(),this.account.filepath=e.path;try{this.account.main=await this.fs.readFile(e.path,{encoding:"utf8"}),((n=(r=this.account.project)==null?void 0:r.data)==null?void 0:n.type)==="vue-sfc"&&(this.layers="component")}catch{this.account.main=""}}const s=await b("undoHistory"),l=await b("redoHistory");this.undoCount=((a=s==null?void 0:s[e==null?void 0:e.path])==null?void 0:a.length)||0,this.redoCount=((u=l==null?void 0:l[e==null?void 0:e.path])==null?void 0:u.length)||0,this.modified=await this.packer.gitModified()},async selected(e){var t;this.getNavTitle(),(e==null?void 0:e.type)==="keyframes"?(this.keyframesTimeline||(this.timeline=!0),this.keyframesName=e.name,this.keyframesTimeline=e.keyframes):(e==null?void 0:e.type)==="keyframe"?(this.keyframesTimeline||(this.timeline=!0),this.keyframesName=((t=e==null?void 0:e.parent)==null?void 0:t.name)||"?",this.keyframesTimeline=this.selectedParent):(this.keyframesName="",this.keyframesTimeline=null,this.timeline=!1)}},async created(){var t;if(window.addEventListener("beforeunload",this.handleBeforeUnload),document.addEventListener("logout",this.logoutListener),document.addEventListener("keydown",async s=>{s.key==="s"&&(navigator.userAgent.indexOf("Mac")!==-1?s.metaKey:s.ctrlKey)&&(s.preventDefault(),await this.store())},!1),this.broadcaster.onmessage=async s=>{var l,r,n,a,u,h,c;if(!((l=s.data)!=null&&l.id)!==((a=(n=(r=this.account)==null?void 0:r.project)==null?void 0:n.data)==null?void 0:a.id)&&(s.data.reload&&await this.reload(!1),(u=this.fsItem)!=null&&u.path.endsWith(".vue")&&((h=this.fsItem)==null?void 0:h.path)===((c=s.data)==null?void 0:c.path)))try{this.account.main=await this.fs.readFile(this.fsItem.path,{encoding:"utf8"})}catch(C){console.log(C)}},this.ast.listen(async s=>{s&&(s!=null&&s.attrs)&&(this.selected=s),await this.save()}),this.account.filepath&&this.account.filepath!==((t=this.fsItem)==null?void 0:t.path)){let s=this.account.filepath.split("/");try{let l=await this.fs.stat(this.account.filepath);this.fsItem={title:s[s.length-1],path:this.account.filepath,...l}}catch{this.fsItem=null}}const e={};onkeydown=onkeyup=async s=>{["INPUT","TEXTAREA"].includes(s.target.nodeName.toUpperCase())||(s.type==="keydown"&&(s.key.toLowerCase()==="meta"||s.key.toLowerCase()==="control")?e.meta=!0:s.type==="keyup"&&(s.key.toLowerCase()==="meta"||s.key.toLowerCase()==="control")?e.meta=!1:s.type==="keydown"&&s.key.toLowerCase()==="z"?e.z=!0:s.type==="keyup"&&s.key.toLowerCase()==="z"?e.z=!1:s.type==="keydown"&&s.key.toLowerCase()==="shift"?e.shift=!0:s.type==="keyup"&&s.key.toLowerCase()==="shift"&&(e.shift=!1),s.key.toLowerCase()==="z"&&(s.preventDefault(),e.meta&&e.shift&&e.z?await this.redo():e.meta&&e.z&&await this.undo()))}},beforeUnmount(){document.removeEventListener("logout",this.logoutListener)},async mounted(){this.darkmode=window.matchMedia("(prefers-color-scheme: dark)").matches,this.isMobile(),this.navigator=!this.mobile,this.menu=!this.mobile,window.addEventListener("resize",()=>this.isMobile()),this.ast.parse(this.account.main)},destroyed(){window.removeEventListener("beforeunload",this.handleBeforeUnload)},methods:{async addFile(e="component"){const t=prompt(`New ${e}`,`${e}.vue`);if(t)try{const s=`
          <template></template>
          <script>
            export default {
              data: () => ({})
            }
          <\/script>
          <style scoped></style>
        `;try{await this.fs.mkdir(`/src/${e}s`)}catch{}await this.fs.writeFile(`/src/${e}s/${t}`,s.trim(),{encoding:"utf8"}),this.renderKey++,this.setFSItem(`/src/${e}s/${t}`)}catch(s){alert(s.message)}},async setFSItem(e){let t=e.split("/");try{let s=await this.fs.stat(e);this.fsItem={title:t[t.length-1],path:e,...s},this.$nextTick(()=>{this.sendToWindow(this.editorWindow)})}catch(s){console.log(`Could not set file system item: ${s.message}`),this.fsItem=null}},async resetFSItem(){let e=this.account.filepath.split("/");try{let t=await this.fs.stat(this.account.filepath);this.fsItem={title:e[e.length-1],path:this.account.filepath,...t},this.$nextTick(()=>{this.sendToWindow(this.editorWindow)})}catch(t){console.log(`Could not reset file system item: ${t.message}`),this.fsItem=null}},logoutListener(){this.handleBeforeUnload(),this.profile=null},handleBeforeUnload(){var e;if(this.editorWindow&&this.editorWindow.close(),(e=this.editors)!=null&&e.length){for(const t of this.editorWindows)t.closed||t.close();this.editorWindows=[]}},async sync(e="web"){this.loadingSync=!0,await this.fs.sync(e),this.fs.watch(async()=>{await this.reload()}),this.syncing=!0,this.loadingSync=!1},syncOff(){this.fs.syncOff(),this.syncing=!1,this.loadingSync=!1},async redo(){var r;const e=await b("undoHistory"),t=await b("redoHistory");let s=this.fsItem;if(!s||!s.title.includes(".vue")||!((r=t[s.path])!=null&&r.length))return;let l=t[s.path][t[s.path].length-1];t[s.path].pop(),e[s.path]||(e[s.path]=[]),e[s.path].push(this.ast.stringify()),this.undoCount=e==null?void 0:e[s.path].length,this.redoCount=t==null?void 0:t[s.path].length,await k("undoHistory",e),await k("redoHistory",t),await this.save(l,!1),this.account.main=l,this.ast.parse(l)},async undo(){var r;const e=await b("undoHistory"),t=await b("redoHistory");let s=this.fsItem;if(!s||!s.title.includes(".vue")||!((r=e[s.path])!=null&&r.length))return;let l=e[s.path][e[s.path].length-1];e[s.path].pop(),t[s.path]||(t[s.path]=[]),t[s.path].push(this.ast.stringify()),this.undoCount=e==null?void 0:e[s.path].length,this.redoCount=t==null?void 0:t[s.path].length,await k("undoHistory",e),await k("redoHistory",t),await this.save(l,!1),this.account.main=l,this.ast.parse(l)},fixFontImport(e){this.ast.addGoogleFont(e)},draggingNavigator(e){var s;let t=(s=e==null?void 0:e.touches)!=null&&s.length?e.touches[0]:e;this.widthNavmenu=t.clientX,localStorage.setItem("widthNavmenu",this.widthNavmenu)},draggingSidemenu(e){var s;let t=(s=e==null?void 0:e.touches)!=null&&s.length?e.touches[0]:e;this.widthSidemenu=window.innerWidth-t.clientX,localStorage.setItem("widthSidemenu",this.widthSidemenu)},async remove(e){this.selected&&this.ast.id(this.selected)===this.ast.id(e)&&(this.selected=null,this.selectedType=null,this.getNavTitle()),await this.ast.remove(e)},async removeSafe(e){if(this.selectedType==="style"){let t=-1,s=0;for(const l of this.selectedParent||[]){if(l===this.selected){t=s;break}s++}t>-1&&(this.selectedParent.splice(t,1),await this.save())}else this.selected&&this.ast.id(this.selected)===this.ast.id(e)&&(this.selected=null,this.selectedType=null,this.getNavTitle()),await this.ast.remove(e)},async drop(e){var t,s,l,r,n,a;if(e!=null&&e.target){const u=!((a=(n=(r=(l=(s=(t=this.ast)==null?void 0:t.AST)==null?void 0:s.html)==null?void 0:l[0])==null?void 0:r[0])==null?void 0:n.children)!=null&&a.filter(h=>h.type!=="text").length);if(this.insert)["top","left"].includes(e.position)?await this.ast.before(e.target,this.insert):["bottom","right"].includes(e.position)?await this.ast.after(e.target,this.insert):await this.ast.inside(e.target,this.insert);else return await this.domove(e);this.insert=this.moving=null,await this.save(),u&&await this.reload()}else this.insert=this.moving=null},async domove(e){var t;if(this.moving){let s=(t=this.moving)!=null&&t.sid?this.ast.search(this.moving.sid):this.moving;["top","left"].includes(e.position)?(await this.ast.remove(s),await this.ast.before(e.target,s)):["bottom","right"].includes(e.position)?(await this.ast.remove(s),await this.ast.after(e.target,s)):(await this.ast.remove(s),await this.ast.inside(e.target,s)),await this.save()}this.insert=this.moving=null},getNavTitle(){var e;this.selectedType==="element"?this.fsItemTitle=((e=this.selected)==null?void 0:e.name)||"":this.selectedType==="style"&&this.selected.type==="rule"?this.fsItemTitle=this.selected.selectors.join(", "):this.selectedType==="style"&&this.selected.type==="font-face"?this.fsItemTitle=this.selected.type:this.selectedType==="style"&&this.selected.type==="keyframe"?this.fsItemTitle=this.selected.values.join(", "):this.selected?this.fsItemTitle=this.selected.type:this.fsItemTitle=this.fsItem.title},async reload(e=!0){var t,s,l,r;try{await this.fs.stat((t=this.fsItem)==null?void 0:t.path),this.selected=null,this.selectedType=null,this.account.main=await this.fs.readFile(this.fsItem.path,{encoding:"utf8"}),this.modified=await this.packer.gitModified(),this.ast.parse(this.account.main),e&&this.broadcaster.postMessage({id:(r=(l=(s=this.account)==null?void 0:s.project)==null?void 0:l.data)==null?void 0:r.id,reload:!0})}catch{}this.renderKey++},isMobile(){let e=window.innerWidth;this.width>900&&e<=900?(this.navigator=!1,this.menu=!1):this.width<=900&&e>900&&(this.navigator=!0,this.menu=!0),this.width=e,this.mobile=this.width<=900,this.landscape=e>window.innerHeight},async move(e){await this.ast.remove(e.bullet),e.inside?await this.ast.inside(e.target,e.bullet):await this.ast.after(e.target,e.bullet),this.moving=null,await this.save()},async insertion(e){var s,l,r,n,a,u;const t=!((u=(a=(n=(r=(l=(s=this.ast)==null?void 0:s.AST)==null?void 0:l.html)==null?void 0:r[0])==null?void 0:n[0])==null?void 0:a.children)!=null&&u.filter(h=>h.type!=="text").length);e.inside?await this.ast.inside(e.target,e.bullet):await this.ast.after(e.target,e.bullet),this.insert=null,await this.save(),t&&await this.reload()},async add(e){var s,l,r,n,a,u;const t=!((u=(a=(n=(r=(l=(s=this.ast)==null?void 0:s.AST)==null?void 0:l.html)==null?void 0:r[0])==null?void 0:n[0])==null?void 0:a.children)!=null&&u.filter(h=>h.type!=="text").length);this.before?await this.ast.before(this.before,e):this.after?await this.ast.after(this.after,e):this.inside?await this.ast.inside(this.inside,e):await this.ast.init(e),this.before=this.after=this.inside=null,await this.save(),t&&await this.reload()},appendStyle(e){this.layerStyle=e,this.stylesheets=!0},async addStyle(e){this.stylesheets=!1,this.layerStyle.parent.splice(this.layerStyle.index,0,e),await this.save()},async removeStyle(e){e.parent.splice(e.index,1),await this.save()},async appendRule(e){this.layerRule=e,this.rules=!0,await this.save()},async addRule(e){this.rules=!1,this.layerRule.parent.splice(this.layerRule.index,0,e),await this.save()},async removeRule(e){e.parent.splice(e.index,1),await this.save()},async appendKeyframe(e){this.layerKeyframe=e,this.keyframes=!0,await this.save()},async addKeyframe(e){this.keyframes=!1,this.layerKeyframe.parent.splice(this.layerKeyframe.index,0,e);const t=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});this.layerKeyframe.parent.sort((s,l)=>{var r,n;return t.compare((r=s.values)==null?void 0:r[0],(n=l.values)==null?void 0:n[0])}),await this.save()},async deleteKeyframe(e){e.parent.splice(e.index,1),await this.save()},async save(e=this.ast.stringify(),t=!0){let s=this.fsItem;if(s&&s.title.includes(".vue")){const l=await this.fs.readFile(s.path,{encoding:"utf8"});if(e=Re.html(e.replace("<template><",`<template>
<`),Ne),t&&e!==l&&!this.historyLock){this.historyLock=!0;const r=await b("undoHistory"),n=await b("redoHistory");r[s.path]||(r[s.path]=[]),n[s.path]||(n[s.path]=[]),r[s.path].push(l),r[s.path].slice(-500),n[s.path]=[],this.undoCount=r==null?void 0:r[s.path].length,this.redoCount=n==null?void 0:n[s.path].length,await k("undoHistory",r),await k("redoHistory",n),setTimeout(()=>{this.historyLock=!1},100)}await this.fs.writeFile(s.path,e.trim(),{encoding:"utf8"}),this.modified=await this.packer.gitModified(!0),this.broadcaster.postMessage({id:this.account.project.data.id,path:this.fsItem.path})}},async getCode(){var e;if(this.mobile)this.code=await this.fs.readFile(this.fsItem.path,{encoding:"utf8"});else if(!this.editorWindow||this.editorWindow.closed){const t=await this.fs.readFile(this.fsItem.path,{encoding:"utf8"});this.editorWindow=Pe(t,(e=this.fsItem)==null?void 0:e.title),this.editorWindow.addEventListener("message",async s=>{s.data.event==="content-parent"&&(this.lockBroadcast=!0,this.account.main=s.data.content,this.$nextTick(async()=>{await this.save(),this.selected&&(this.selected=this.ast.search(this.ast.id(this.selected)))}))})}else this.editorWindow.focus()},async sendToWindow(e){var t;if(e&&!this.lockBroadcast){let s=this.ast.stringify();s=Re.html(s.replace("<template><",`<template>
<`),Ne),e.postMessage({event:"content",content:s.trim(),filename:(t=this.fsItem)==null?void 0:t.title},"*")}this.$nextTick(()=>{this.lockBroadcast=!1})},async store(){var e;await this.save(),this.storingonline=!0,(e=this.account.project.data)!=null&&e.id?await this.update():await this.create(),this.storingonline=!1,this.modified=await this.packer.gitModified()},async update(){var n,a,u,h;let e=Date.now();this.account.progress.save=0,this.admin&&console.log("Committing changes",0),await this.packer.gitSave(this.admin,e),this.account.progress.save=30,this.admin&&console.log("Pushing to internal git repo new",Date.now()-e);let t=await this.services.users.authentication.getAccessToken();await this.packer.gitPush(`${this.gitserver}/git/${this.account.project.data.uuid}`,c=>{this.account.progress.save=30+c.progress*60},{"authorization-x":"Bearer "+t}),this.account.progress.save=90,this.admin&&console.log("Updating meta data.",Date.now()-e);let s=!1;try{await this.fs.stat("/tailwind.config.js"),s=!0}catch{}this.account.project.data=await this.services.manager.service("applications").patch(this.account.project.data.id,{title:this.account.project.data.title,slug:this.account.project.data.slug,description:this.account.project.data.description,icon:this.account.project.data.icon,favicon:this.account.project.data.facicon,elicon:this.account.project.data.elicon,tailwind:s});const l=(a=(n=await this.services.manager.service("application_mockups").find({query:{application_id:this.account.project.data.id}}))==null?void 0:n.data)==null?void 0:a[0];this.account.project.mockup=(l==null?void 0:l.code)||"";const r=(h=(u=await this.services.manager.service("application_git_tokens").find({query:{application_id:this.account.project.data.id,provider:"github"}}))==null?void 0:u.data)==null?void 0:h[0];this.account.project.github=r,this.account.project.data.type,this.account.progress.save=100,this.admin&&console.log("Saving to localstorage",Date.now()-e),this.account.save(),this.account.progress.save=null},async create(){var e,t,s;if((s=(t=(e=this.account)==null?void 0:e.project)==null?void 0:t.data)!=null&&s.title)await this.packer.gitSave(),this.account.project.data=await this.services.manager.service("applications").create(this.account.project.data),this.account.save(),await this.update();else{let l=prompt("Title");if(!l)return alert("A title is required");await this.packer.gitSave(),this.account.project.data=await this.services.manager.service("applications").create({title:l}),this.account.save(),await this.update()}},preview(){this.open(location.protocol+"//"+location.host+"/live-preview")},open(e){window.open(e,"_blank")},async openEditor(e){let t=await this.fs.readFile(e,{encoding:"utf8"}),s=this.editorWindows.find(l=>l.path===e);!s||s.window.closed?(s={window:Pe(t,e,e),path:e},s.window.addEventListener("message",async l=>{if(l.data.event==="content-parent"&&l.data.path===e){await this.fs.writeFile(e,l.data.content,{encoding:"utf8"});let r=this.selected;await this.reload(),this.$nextTick(async()=>{r&&(this.selected=this.ast.search(this.ast.id(r)))})}}),this.editorWindows.push(s),await this.sendToFileWindow(s,t,e)):s.window.focus()},async sendToFileWindow(e,t,s){e.window.postMessage({event:"content",content:t,path:s,filename:this.fsItemTitle},"*")}}},Ke=()=>{ht(e=>({"2072236b":e.editorsTopMobile,"233b64c2":e.mobileMenuHeight,"2c26b6b0":e.navmenu,"39c99760":e.sidemenu,"6600a1ea":e.bottomTabsHeight,"7df57328":e.breadcrumbBottom,"29178eb2":e.transformToolsHeightMobile,"0b9845f0":e.transformToolsHeight}))},De=H.setup;H.setup=De?(e,t)=>(Ke(),De(e,t)):Ke;const Ot={id:"tools"},Wt=["title"],Bt={key:0},Ht={key:1},$t={key:1,class:"code-file"},Vt=["title"],zt={key:1},Ut={key:2,class:"code-file"},qt=["title"],Gt={key:1},Xt={class:"topbar"},Zt={key:0,class:"add-create-container"},Jt=["disabled"],Qt=["disabled"],Yt={key:2,class:"transform-tools welcome"},xt={id:"layers"},_t={class:"tabs"},es={key:5},ts={class:"tabs-bottom"},ss=["disabled"],is={class:"infobar"},ns={class:"tools tools--left"},os={class:"info"},as={key:0,style:{"margin-right":"5px"}},ls={key:1},rs={key:2},ds={key:3},us={key:4},ms={key:5},ps={class:"tools"},hs=["title"],fs=["title"],ys={class:"tools-menu--wrapper"},vs={class:"tools-menu"};function gs(e,t,s,l,r,n){var V,z,U,q,G,X,Z,J,Q,Y,x,_,ee,te,se,ie,ne,oe,ae,le,re,de,ue,me,pe,he,fe,ye,ve,ge,ce,we,ke,be,Ce,Se,Me,Te,Ie,je;const a=y("Navigator"),u=y("Transform"),h=y("SectionRenderer"),c=y("SectionTimeline"),C=y("SectionBreadcrumb"),T=y("SectionTree"),K=y("SectionStyles"),D=y("SectionFiles"),F=y("SectionRoutes"),A=y("SectionDeploy"),S=y("SectionVue"),$=y("ModalElements"),w=y("ModalStylesheets"),L=y("ModalRules"),Fe=y("ModalKeyframes"),Ae=y("ModalMockup"),Le=y("ModalMenu"),Oe=y("ModalProfile"),We=y("ModalEditor"),Be=y("ModalRoutes");return d(),m("div",{class:p(["home",{mobile:e.mobile,landscape:e.landscape,mi:e.breakpoint==="mi",sm:e.breakpoint==="sm",md:e.breakpoint==="md",lg:e.breakpoint==="lg",xl:e.breakpoint==="xl",xl2:e.breakpoint==="2xl"}])},[o("div",Ot,[o("button",{onClick:t[0]||(t[0]=i=>e.mainMenu=!0),class:"main-menu",title:"Project settings"}),o("div",{title:"Vue Play v"+n.pkg.version,class:"logo",onClick:t[1]||(t[1]=i=>n.open("https://vueplay.com"))},null,8,Wt),n.premium?f("",!0):(d(),m("button",{key:0,onClick:t[2]||(t[2]=i=>e.profile="Plan"),class:"upgrade",title:"Upgrade to Premium"},[e.mobile?(d(),m("span",Ht,"Premium")):(d(),m("span",Bt,"Get Premium Access")),t[125]||(t[125]=o("span",{style:{color:"yellow"}},"★",-1))])),o("button",{onClick:t[3]||(t[3]=i=>e.profile=!0),class:p(["profile",{"profile-placeholder":!((z=(V=n.account)==null?void 0:V.user)!=null&&z.picture)}]),style:B({backgroundImage:(q=(U=n.account)==null?void 0:U.user)!=null&&q.picture?"url("+((X=(G=n.account)==null?void 0:G.user)==null?void 0:X.picture)+")":""}),title:"Show profile"},null,6),e.mobile?f("",!0):(d(),m("div",$t,[(J=(Z=n.account)==null?void 0:Z.project)!=null&&J.data?(d(),m("span",{key:0,class:"project-title",title:((Y=(Q=n.account.project)==null?void 0:Q.data)==null?void 0:Y.type)==="vue-sfc"?"Components":"Applications",onClick:t[4]||(t[4]=i=>{var P,R;return e.mainMenu=((R=(P=n.account.project)==null?void 0:P.data)==null?void 0:R.type)==="vue-sfc"?"Components":"Applications"})},g((ee=(_=(x=n.account)==null?void 0:x.project)==null?void 0:_.data)==null?void 0:ee.title),9,Vt)):f("",!0),(te=e.fsItem)!=null&&te.title?(d(),m("span",zt," / ")):f("",!0),(se=e.fsItem)!=null&&se.title?(d(),m("b",{key:2,class:"project-title",onClick:t[5]||(t[5]=(...i)=>n.getCode&&n.getCode(...i)),title:"Edit code"},[Ee(g((ie=e.fsItem)==null?void 0:ie.title)+" ",1),t[126]||(t[126]=o("div",{class:"code-edit"},null,-1))])):f("",!0)])),e.mobile?(d(),m("div",Ut,[(oe=(ne=n.account)==null?void 0:ne.project)!=null&&oe.data?(d(),m("span",{key:0,class:"project-title",title:((le=(ae=n.account.project)==null?void 0:ae.data)==null?void 0:le.type)==="vue-sfc"?"Components":"Applications",onClick:t[6]||(t[6]=i=>{var P,R;return e.mainMenu=((R=(P=n.account.project)==null?void 0:P.data)==null?void 0:R.type)==="vue-sfc"?"Components":"Applications"})},g((ue=(de=(re=n.account)==null?void 0:re.project)==null?void 0:de.data)==null?void 0:ue.title),9,qt)):f("",!0),(me=e.fsItem)!=null&&me.title?(d(),m("br",Gt)):f("",!0),(pe=e.fsItem)!=null&&pe.title?(d(),m("b",{key:2,class:"project-title",onClick:t[7]||(t[7]=(...i)=>n.getCode&&n.getCode(...i)),title:"Edit code"},[Ee(g((he=e.fsItem)==null?void 0:he.title)+" ",1),t[127]||(t[127]=o("div",{class:"code-edit small"},null,-1))])):f("",!0)])):f("",!0)]),I(v(a,{onSave:t[8]||(t[8]=i=>n.save()),onStore:t[9]||(t[9]=i=>n.store()),onInsert:t[10]||(t[10]=i=>e.insert=i),onChanged:n.reload,onFixFontImport:n.fixFontImport,onBreakpoint:t[11]||(t[11]=i=>e.breakpoint=i),onDarkmode:t[12]||(t[12]=i=>e.darkmode=i),onGroup:t[13]||(t[13]=i=>e.group=i),onReload:t[14]||(t[14]=i=>n.reload()),onRemoveComponent:t[15]||(t[15]=i=>n.save().then(()=>n.reload())),onUpgrade:t[16]||(t[16]=i=>e.profile="Plan"),onRefreshContent:t[17]||(t[17]=i=>e.refreshContentBackwards++),modified:e.modified,breakpoint:e.breakpoint,storingonline:e.storingonline,header:e.fsItemTitle,element:e.selected,parent:e.selectedParent,type:e.selectedType,empty:n.emptyProject,ast:e.ast,path:(fe=e.fsItem)==null?void 0:fe.path,refresh:e.refreshContent,id:"navigator"},null,8,["onChanged","onFixFontImport","modified","breakpoint","storingonline","header","element","parent","type","empty","ast","path","refresh"]),[[j,e.navigator]]),e.mobile?f("",!0):(d(),m("div",{key:0,class:"resizer-navigator",onMousedown:t[18]||(t[18]=i=>e.dragNavigator=!0),onTouchstart:t[19]||(t[19]=i=>e.dragNavigator=!0)},null,32)),e.dragNavigator?(d(),m("div",{key:1,class:"cover",onMousemove:t[20]||(t[20]=(...i)=>n.draggingNavigator&&n.draggingNavigator(...i)),onTouchmove:t[21]||(t[21]=(...i)=>n.draggingNavigator&&n.draggingNavigator(...i)),onMouseup:t[22]||(t[22]=i=>e.dragNavigator=!1),onTouchend:t[23]||(t[23]=i=>e.dragNavigator=!1)},null,32)):f("",!0),v(u,{class:"transform-tools",onSelection:t[24]||(t[24]=i=>(e.selected=e.ast.search(i),e.selectedType="element")),onParent:t[25]||(t[25]=i=>e.selectedParent=i),onSelected:t[26]||(t[26]=i=>e.selected=i),onDrop:n.drop,onMove:t[27]||(t[27]=i=>e.moving=i),onBefore:t[28]||(t[28]=i=>e.before=i),onAfter:t[29]||(t[29]=i=>e.after=i),onInside:t[30]||(t[30]=i=>e.inside=i),onDuplicate:t[31]||(t[31]=i=>e.ast.duplicate(i)),onRemove:n.remove,onRemoveSafe:n.removeSafe,onUndo:n.undo,onRedo:n.redo,onRoute:t[32]||(t[32]=i=>e.route=i),onStore:t[33]||(t[33]=i=>n.store()),onRefreshContent:t[34]||(t[34]=i=>e.refreshContent++),refreshContent:e.refreshContentBackwards,helper:e.helper,moving:e.moving,insert:e.insert,element:e.selected,parent:e.selectedParent,type:e.selectedType,mobile:e.mobile,showTransform:e.showTransform,showPosition:e.showPosition,ast:e.ast,path:(ye=e.fsItem)==null?void 0:ye.path},null,8,["onDrop","onRemove","onRemoveSafe","onUndo","onRedo","refreshContent","helper","moving","insert","element","parent","type","mobile","showTransform","showPosition","ast","path"]),o("div",Xt,[o("button",{title:"Hard reload",onClick:t[35]||(t[35]=i=>n.reload()),class:"screen ref"}),o("button",{onClick:t[36]||(t[36]=i=>e.darkmode=!e.darkmode),class:p([{light:!e.darkmode,dark:e.darkmode},"screen"])},null,2),o("button",{onClick:t[37]||(t[37]=i=>e.breakpoint!=="2xl"?e.breakpoint="2xl":e.breakpoint=null),class:p([{active:e.breakpoint==="2xl"},"screen xl2"])},null,2),o("button",{onClick:t[38]||(t[38]=i=>e.breakpoint!=="xl"?e.breakpoint="xl":e.breakpoint=null),class:p([{active:e.breakpoint==="xl"},"screen xl"])},null,2),o("button",{onClick:t[39]||(t[39]=i=>e.breakpoint!=="lg"?e.breakpoint="lg":e.breakpoint=null),class:p([{active:e.breakpoint==="lg"},"screen lg"])},null,2),o("button",{onClick:t[40]||(t[40]=i=>e.breakpoint!=="md"?e.breakpoint="md":e.breakpoint=null),class:p([{active:e.breakpoint==="md"},"screen md"])},null,2),o("button",{onClick:t[41]||(t[41]=i=>e.breakpoint!=="sm"?e.breakpoint="sm":e.breakpoint=null),class:p([{active:e.breakpoint==="sm"},"screen sm"])},null,2),o("button",{onClick:t[42]||(t[42]=i=>e.breakpoint!=="mi"?e.breakpoint="mi":e.breakpoint=null),class:p([{active:e.breakpoint==="mi"},"screen mi"])},null,2),o("button",{onClick:t[49]||(t[49]=i=>e.addCreate=!e.addCreate),onBlur:t[50]||(t[50]=i=>e.addCreate=!1),class:p([{active:e.addCreate},"add"])},[t[131]||(t[131]=o("img",{width:"12",src:dt},null,-1)),t[132]||(t[132]=o("svg",{viewBox:"0 0 16 16",height:"16",width:"16"},[o("path",{d:"m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"})],-1)),e.addCreate?(d(),m("div",Zt,[o("button",{onPointerdown:t[43]||(t[43]=N(()=>{},["stop","prevent"])),onClick:t[44]||(t[44]=i=>n.addFile("component"))},t[128]||(t[128]=[o("div",{style:{"margin-right":"12px",width:"12px",display:"inline-block"}},[o("img",{src:Ft,style:{width:"130%",translate:"-2px 3px"}})],-1),o("span",null,"New component",-1)]),32),o("button",{onPointerdown:t[45]||(t[45]=N(()=>{},["stop","prevent"])),onClick:t[46]||(t[46]=i=>n.addFile("view"))},t[129]||(t[129]=[o("div",{style:{"margin-right":"12px",width:"12px",display:"inline-block"}},[o("img",{src:At,style:{width:"100%",translate:"0px 1px"}})],-1),o("span",null,"New view",-1)]),32),o("button",{onPointerdown:t[47]||(t[47]=N(()=>{},["stop","prevent"])),onClick:t[48]||(t[48]=i=>e.updateRoutes=!e.updateRoutes)},t[130]||(t[130]=[o("div",{style:{"margin-right":"12px",width:"12px",display:"inline-block"}},[o("img",{src:Lt,style:{width:"100%",translate:"0px 1px"}})],-1),o("span",null,"New route",-1)]),32)])):f("",!0)],34),o("button",{class:"undo",onClick:t[51]||(t[51]=i=>n.undo()),disabled:e.undoCount<=0},null,8,Jt),o("button",{class:"redo",onClick:t[52]||(t[52]=i=>n.redo()),disabled:e.redoCount<=0},null,8,Qt)]),n.emptyProject?(d(),m("div",Yt,[t[133]||(t[133]=o("h1",{style:{margin:"35vh 0px 0px"}},"Welcome to",-1)),t[134]||(t[134]=o("h1",{style:{margin:"0px","font-size":"50px",color:"white"}}," Vue Play Studio ",-1)),o("button",{class:"open-project-button",onClick:t[53]||(t[53]=i=>e.mainMenu="Applications")}," Create or Open Project ")])):f("",!0),I(v(h,{path:(ve=e.fsItem)==null?void 0:ve.path,ast:e.ast.root,sidemenu:n.sidemenu,navmenu:n.navmenu,mobile:e.mobile,events:e.events,timeline:e.timeline,renderKey:e.renderKey,routerOverlay:e.routerOverlay,alwaysMount:e.alwaysMount,darkmode:e.darkmode,onInit:t[54]||(t[54]=i=>e.renderKey++)},null,8,["path","ast","sidemenu","navmenu","mobile","events","timeline","renderKey","routerOverlay","alwaysMount","darkmode"]),[[j,!n.emptyProject]]),e.timeline?(d(),M(c,{key:3,class:"timeline",keyframesName:e.keyframesName,keyframes:e.keyframesTimeline,selected:e.selected,onSelection:t[55]||(t[55]=i=>(e.selected=i,e.selectedType="style")),onAddKeyframe:n.appendKeyframe,onDeleteKeyframe:n.deleteKeyframe,onParent:t[56]||(t[56]=i=>e.selectedParent=i),onSave:t[57]||(t[57]=i=>n.save())},null,8,["keyframesName","keyframes","selected","onAddKeyframe","onDeleteKeyframe"])):f("",!0),v(C,{onSelection:t[58]||(t[58]=i=>(e.selected=i,e.selectedType="element")),onSelected:t[59]||(t[59]=i=>e.fsItem=i),onMap:t[60]||(t[60]=i=>e.componentRouteMappings=i),class:"breadcrumbbar",path:(ge=e.fsItem)==null?void 0:ge.path,ast:e.ast,selected:e.selected,route:e.route,renderKey:e.renderKey},null,8,["path","ast","selected","route","renderKey"]),e.mobile?f("",!0):(d(),m("div",{key:4,class:"resizer-sidemenu",onMousedown:t[61]||(t[61]=i=>e.dragSidemenu=!0),onTouchstart:t[62]||(t[62]=i=>e.dragSidemenu=!0)},null,32)),e.dragSidemenu?(d(),m("div",{key:5,class:"cover",onMousemove:t[63]||(t[63]=(...i)=>n.draggingSidemenu&&n.draggingSidemenu(...i)),onTouchmove:t[64]||(t[64]=(...i)=>n.draggingSidemenu&&n.draggingSidemenu(...i)),onMouseup:t[65]||(t[65]=i=>e.dragSidemenu=!1),onTouchend:t[66]||(t[66]=i=>e.dragSidemenu=!1)},null,32)):f("",!0),I(o("div",{id:"editors",style:B(e.moving||e.insert?"z-index: 101!important":"")},[I(o("div",xt,[o("div",_t,[o("button",{class:p(["tab component",e.layers==="component"?"active":""]),title:"Layers",onClick:t[67]||(t[67]=i=>e.layers="component")},null,2),o("button",{class:p(["tab style",e.layers==="styles"?"active":""]),title:"Style",onClick:t[68]||(t[68]=i=>e.layers="styles")},null,2),o("button",{class:p(["tab vue",e.layers==="vue"?"active":""]),title:"Options API",onClick:t[69]||(t[69]=i=>e.layers="vue")},null,2)]),e.layers==="component"?(d(),M(T,{key:0,parent:e.ast.html,selected:e.selected,type:e.selectedType,mobile:e.mobile,moving:e.moving?(ce=e.moving)!=null&&ce.sid?e.ast.search((we=e.moving)==null?void 0:we.sid):e.moving:"",insert:e.insert,ast:e.ast,onSelection:t[70]||(t[70]=i=>(e.selected=i,e.selectedType="element")),onParent:t[71]||(t[71]=i=>e.selectedParent=i),onDelete:t[72]||(t[72]=i=>n.remove(i)),onBefore:t[73]||(t[73]=i=>e.before=i),onAfter:t[74]||(t[74]=i=>e.after=i),onInside:t[75]||(t[75]=i=>e.inside=i),onDuplicate:t[76]||(t[76]=i=>e.ast.duplicate(i)),onMoveit:t[77]||(t[77]=i=>(e.selected=i,e.selectedType="element",e.$nextTick(()=>{e.moving=i,e.server.send({event:"positions-excluded"})}))),onMove:n.move,onInsert:n.insertion,onDragEnd:t[78]||(t[78]=i=>e.moving=null)},null,8,["parent","selected","type","mobile","moving","insert","ast","onMove","onInsert"])):e.layers==="styles"?(d(),M(K,{key:1,onSelection:t[79]||(t[79]=i=>(e.selected=i,e.selectedType="style")),onParent:t[80]||(t[80]=i=>e.selectedParent=i),onAdd:n.appendStyle,onDelete:n.removeStyle,onAddRule:n.appendRule,onDeleteRule:n.removeRule,onAddKeyframe:n.appendKeyframe,onDeleteKeyframe:n.deleteKeyframe,onSave:t[81]||(t[81]=i=>n.save()),parent:e.ast.css,selected:e.selected},null,8,["onAdd","onDelete","onAddRule","onDeleteRule","onAddKeyframe","onDeleteKeyframe","parent","selected"])):e.layers==="files"?(d(),M(D,{key:2,mobile:e.mobile,selected:e.fsItem,renderKey:e.renderKey,syncing:e.syncing,loadingSync:e.loadingSync,ast:e.ast,onCodeEditor:t[82]||(t[82]=i=>n.openEditor(i)),onSelected:t[83]||(t[83]=i=>e.fsItem=i),onCreate:t[84]||(t[84]=i=>n.reload()),onUpdate:t[85]||(t[85]=i=>n.reload()),onDelete:t[86]||(t[86]=i=>n.reload()),onSync:n.sync,onSyncOff:n.syncOff},null,8,["mobile","selected","renderKey","syncing","loadingSync","ast","onSync","onSyncOff"])):e.layers==="routes"?(d(),M(F,{key:3,onSelected:t[87]||(t[87]=i=>e.fsItem=i),onRoute:t[88]||(t[88]=i=>e.route=i),onCodeEditor:t[89]||(t[89]=i=>n.openEditor(i)),renderKey:e.renderKey,mappings:e.componentRouteMappings,filepath:(ke=e.fsItem)==null?void 0:ke.path},null,8,["renderKey","mappings","filepath"])):e.layers==="deploy"?(d(),M(A,{key:4,mobile:e.mobile,ast:e.ast},null,8,["mobile","ast"])):f("",!0),e.ast.js?(d(),m("div",es,[I(v(S,{onSave:t[90]||(t[90]=i=>n.save().then(()=>i())),onReload:t[91]||(t[91]=i=>(e.ast.insertcomponent=null,n.reload())),onReset:t[92]||(t[92]=i=>e.ast.insertcomponent=null),file:(be=e.fsItem)==null?void 0:be.title,parent:e.ast.js,insertcomponent:e.ast.insertcomponent},null,8,["file","parent","insertcomponent"]),[[j,e.layers==="vue"]])])):f("",!0)],512),[[j,!n.emptyProject]]),I(o("div",ts,[o("button",{class:p(["tab folder",e.layers==="files"?"active":""]),title:"Files",onClick:t[93]||(t[93]=i=>e.layers="files")},null,2),o("button",{class:p(["tab routes",e.layers==="routes"?"active":""]),title:"Routes",disabled:((Se=(Ce=n.account.project)==null?void 0:Ce.data)==null?void 0:Se.type)==="vue-sfc",onClick:t[94]||(t[94]=i=>e.layers="routes")},null,10,ss),o("button",{class:p(["tab deploy",e.layers==="deploy"?"active":""]),title:"Deploy",onClick:t[95]||(t[95]=i=>e.layers="deploy")},null,2)],512),[[j,!n.emptyProject]])],4),[[j,e.menu]]),o("div",is,[o("div",ns,[e.mobile?(d(),m("button",{key:1,title:"Navigator",class:p(["menu left",{active:!e.menu}]),onClick:t[97]||(t[97]=i=>(e.menu=!e.menu,e.navigator=!1))},null,2)):(d(),m("button",{key:0,title:"Navigator",class:p(["menu left",{active:!e.navigator}]),onClick:t[96]||(t[96]=i=>e.navigator=!e.navigator)},null,2))]),o("div",os,[e.fsItem?(d(),m("span",as,[t[135]||(t[135]=o("b",null,"File:",-1)),t[136]||(t[136]=o("br",null,null,-1)),o("span",null,g(e.fsItem.title),1)])):f("",!0),e.selectedType==="element"?(d(),m("span",ls,[t[137]||(t[137]=o("b",null,"Element:",-1)),t[138]||(t[138]=o("br",null,null,-1)),o("span",null,g(((Me=e.selected)==null?void 0:Me.name)||"-"),1)])):e.selectedType==="style"&&e.selected.type==="rule"?(d(),m("span",rs,[t[139]||(t[139]=o("b",null,"Selector:",-1)),t[140]||(t[140]=o("br",null,null,-1)),o("span",null,g(e.selected.selectors.join(", ")),1)])):e.selectedType==="style"&&e.selected.type==="font-face"?(d(),m("span",ds,[t[141]||(t[141]=o("b",null,"Style:",-1)),t[142]||(t[142]=o("br",null,null,-1)),o("span",null,g(e.selected.type),1)])):e.selectedType==="style"&&e.selected.type==="keyframe"?(d(),m("span",us,[t[143]||(t[143]=o("b",null,"Keyframe:",-1)),t[144]||(t[144]=o("br",null,null,-1)),o("span",null,g(e.selected.values.join(", ")),1)])):e.selected?(d(),m("span",ms,[t[145]||(t[145]=o("b",null,"Style:",-1)),t[146]||(t[146]=o("br",null,null,-1)),o("span",null,g(e.selected.type),1)])):f("",!0)]),o("div",ps,[e.mobile?(d(),m("button",{key:1,title:"Menu",class:p(["menu",{active:e.navigator}]),onClick:t[99]||(t[99]=i=>(e.navigator=!e.navigator,e.menu=!1))},null,2)):(d(),m("button",{key:0,title:"Menu",class:p(["menu",{active:e.menu}]),onClick:t[98]||(t[98]=i=>e.menu=!e.menu)},null,2)),o("button",{class:"preview",title:"Open live-preview",onClick:t[100]||(t[100]=(...i)=>n.preview&&n.preview(...i))}),o("button",{class:"mockup",title:"Mockup",onClick:t[101]||(t[101]=i=>e.mockup=!0)}),o("button",{class:p(["events",{active:e.events}]),title:(e.events?"Disable":"Enable")+" click events",onClick:t[102]||(t[102]=i=>e.events=!e.events)},null,10,hs),o("button",{class:p(["clock",{active:e.timeline}]),title:(e.timeline?"Close":"Open")+" timeline",onClick:t[103]||(t[103]=i=>e.timeline=!e.timeline)},null,10,fs),o("button",{class:p([{position:e.showPosition,transform:e.showTransform},"tools-button"]),title:"Tools"},[o("div",ys,[o("div",vs,[o("button",{class:p(["always-mount",{active:e.alwaysMount}]),title:"Mount on template change",onClick:t[104]||(t[104]=i=>e.alwaysMount=!e.alwaysMount)},null,2),o("button",{class:p(["select-helper",{active:e.helper}]),title:"Select helper",onClick:t[105]||(t[105]=i=>e.helper=!e.helper)},null,2),o("button",{class:p(["show-transform",{active:e.showTransform}]),title:"Transform",onClick:t[106]||(t[106]=i=>(e.showTransform=!0,e.showPosition=!1))},null,2),o("button",{class:p(["show-position",{active:e.showPosition}]),title:"Position",onClick:t[107]||(t[107]=i=>(e.showPosition=!0,e.showTransform=!1))},null,2),o("button",{class:p(["show-none",{active:!e.showPosition&&!e.showTransform}]),title:"Hide helpers",onClick:t[108]||(t[108]=i=>(e.showPosition=!1,e.showTransform=!1))},null,2)])])],2)])]),v($,{open:e.before||e.after||e.inside,onSelection:t[109]||(t[109]=i=>n.add(i)),onClose:t[110]||(t[110]=i=>e.before=e.after=e.inside=null),onUpgrade:t[111]||(t[111]=i=>(e.before=e.after=e.inside=null,e.profile="Plan"))},null,8,["open"]),v(w,{open:e.stylesheets,onClose:t[112]||(t[112]=i=>e.stylesheets=!1),onSelection:t[113]||(t[113]=i=>n.addStyle(i))},null,8,["open"]),v(L,{open:e.rules,onClose:t[114]||(t[114]=i=>e.rules=!1),onSelection:t[115]||(t[115]=i=>n.addRule(i))},null,8,["open"]),v(Fe,{open:e.keyframes,onClose:t[116]||(t[116]=i=>e.keyframes=!1),onSelection:t[117]||(t[117]=i=>n.addKeyframe(i))},null,8,["open"]),v(Ae,{mobile:e.mobile,open:e.mockup,setPage:e.mockup,onClose:t[118]||(t[118]=i=>e.mockup=!1),onChanged:n.reload},null,8,["mobile","open","setPage","onChanged"]),v(Le,{mobile:e.mobile,open:e.mainMenu,setPage:e.mainMenu,onClose:t[119]||(t[119]=i=>e.mainMenu=!1),onChanged:n.reload},null,8,["mobile","open","setPage","onChanged"]),v(Oe,{mobile:e.mobile,open:e.profile||!((Te=n.account)!=null&&Te.user),setPage:e.profile,ast:e.ast,onClose:t[120]||(t[120]=i=>e.profile=!1),onLogout:t[121]||(t[121]=i=>e.profile=!1),onChanged:n.reload},null,8,["mobile","open","setPage","ast","onChanged"]),v(We,{open:((Ie=e.fsItem)==null?void 0:Ie.path)&&e.code,code:e.code,path:(je=e.fsItem)==null?void 0:je.path,language:"vue",onChange:t[122]||(t[122]=i=>n.save(i).then(()=>{n.reload()})),onClose:t[123]||(t[123]=i=>e.code=null)},null,8,["open","code","path"]),v(Be,{open:e.updateRoutes,mobile:e.mobile,mappings:e.componentRouteMappings,onClose:t[124]||(t[124]=i=>e.updateRoutes=!1)},null,8,["open","mobile","mappings"])],2)}const Ms=E(H,[["render",gs],["__scopeId","data-v-f6b38803"]]);export{Ms as default};
